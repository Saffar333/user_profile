<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--tg-theme-bg-color, #1a1a1a);
            color: var(--tg-theme-text-color, #ffffff);
            padding: 0;
            margin: 0;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--tg-theme-text-color, #ffffff);
            font-size: 24px;
            font-weight: 700;
        }

        .profile-card {
            background-color: var(--tg-theme-secondary-bg-color, #2a2a2a);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .profile-photo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--tg-theme-button-color, #3390ec) 0%, var(--tg-theme-section-bg-color, #3a3a3a) 100%);
            font-size: 48px;
            font-weight: 700;
            color: var(--tg-theme-button-text-color, #ffffff);
            overflow: hidden;
        }

        .profile-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-info {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 16px;
            background-color: var(--tg-theme-section-bg-color, #1a1a1a);
            border-radius: 12px;
            transition: background-color 0.2s ease;
        }

        .info-row:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .info-label {
            font-size: 14px;
            color: var(--tg-theme-hint-color, #8e8e93);
            font-weight: 500;
            min-width: 120px;
        }

        .info-value {
            font-size: 15px;
            color: var(--tg-theme-text-color, #ffffff);
            font-weight: 600;
            text-align: right;
            word-break: break-word;
            flex: 1;
        }

        .info-value.empty {
            color: var(--tg-theme-hint-color, #8e8e93);
            font-style: italic;
            font-weight: 400;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            background-color: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
        }

        .badge.premium {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #000;
        }

        .loader {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 50vh;
            gap: 16px;
        }

        .spinner {
            width: 48px;
            height: 48px;
            border: 4px solid var(--tg-theme-hint-color, rgba(255, 255, 255, 0.1));
            border-top-color: var(--tg-theme-button-color, #3390ec);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loader-text {
            color: var(--tg-theme-hint-color, #8e8e93);
            font-size: 14px;
        }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 480px) {
            .container {
                padding: 16px;
            }

            h1 {
                font-size: 20px;
                margin-bottom: 20px;
            }

            .profile-card {
                padding: 16px;
            }

            .profile-photo {
                width: 100px;
                height: 100px;
                font-size: 40px;
                margin-bottom: 20px;
            }

            .info-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 6px;
                padding: 12px;
            }

            .info-label {
                min-width: auto;
                font-size: 13px;
            }

            .info-value {
                text-align: left;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h1>

        <div id="profileContent">
            <div class="loader">
                <div class="spinner"></div>
                <div class="loader-text">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è...</div>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand();

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
        function displayProfile() {
            console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è...');
            console.log('üì± Telegram Web App –≤–µ—Ä—Å–∏—è:', tg.version);
            console.log('üé® –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:', tg.colorScheme);

            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const user = tg.initDataUnsafe?.user;

            console.log('üë§ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', user);
            console.log('üìä –ü–æ–ª–Ω—ã–µ initDataUnsafe:', tg.initDataUnsafe);

            if (!user) {
                console.warn('‚ö†Ô∏è –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã');
                document.getElementById('profileContent').innerHTML = `
                    <div class="profile-card">
                        <div style="text-align: center; color: var(--tg-theme-hint-color, #8e8e93); padding: 40px 20px;">
                            <div style="font-size: 48px; margin-bottom: 16px;">‚ö†Ô∏è</div>
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">–î–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã</div>
                            <div style="font-size: 14px;">–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram</div>
                        </div>
                    </div>
                `;
                return;
            }

            // –ü–æ–ª—É—á–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            const initData = tg.initDataUnsafe;

            // –§–æ—Ä–º–∏—Ä—É–µ–º –∏–Ω–∏—Ü–∏–∞–ª—ã –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞
            const firstInitial = user.first_name ? user.first_name.charAt(0).toUpperCase() : '?';
            const lastInitial = user.last_name ? user.last_name.charAt(0).toUpperCase() : '';
            const initials = firstInitial + lastInitial;

            // –§–æ—Ä–º–∏—Ä—É–µ–º –∞–≤–∞—Ç–∞—Ä (–µ—Å–ª–∏ –µ—Å—Ç—å photo_url, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ)
            const avatarContent = user.photo_url
                ? `<img src="${user.photo_url}" alt="–§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è">`
                : initials;

            // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–ª–Ω–æ–µ –∏–º—è
            const fullName = [user.first_name, user.last_name].filter(Boolean).join(' ') || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';

            // –§–æ—Ä–º–∏—Ä—É–µ–º HTML –ø—Ä–æ—Ñ–∏–ª—è
            const profileHTML = `
                <div class="profile-card">
                    <div class="profile-photo">${avatarContent}</div>

                    <div class="profile-info">
                        <div class="info-row">
                            <div class="info-label">Telegram ID:</div>
                            <div class="info-value">${user.id || '–ù–µ —É–∫–∞–∑–∞–Ω'}</div>
                        </div>

                        <div class="info-row">
                            <div class="info-label">–ò–º—è:</div>
                            <div class="info-value ${!user.first_name ? 'empty' : ''}">${user.first_name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</div>
                        </div>

                        <div class="info-row">
                            <div class="info-label">–§–∞–º–∏–ª–∏—è:</div>
                            <div class="info-value ${!user.last_name ? 'empty' : ''}">${user.last_name || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}</div>
                        </div>

                        <div class="info-row">
                            <div class="info-label">–ü–æ–ª–Ω–æ–µ –∏–º—è:</div>
                            <div class="info-value">${fullName}</div>
                        </div>

                        <div class="info-row">
                            <div class="info-label">Username:</div>
                            <div class="info-value ${!user.username ? 'empty' : ''}">
                                ${user.username ? '@' + user.username : '–ù–µ —É–∫–∞–∑–∞–Ω'}
                            </div>
                        </div>

                        <div class="info-row">
                            <div class="info-label">–Ø–∑—ã–∫:</div>
                            <div class="info-value ${!user.language_code ? 'empty' : ''}">${user.language_code ? user.language_code.toUpperCase() : '–ù–µ —É–∫–∞–∑–∞–Ω'}</div>
                        </div>

                        <div class="info-row">
                            <div class="info-label">–ü—Ä–µ–º–∏—É–º —Å—Ç–∞—Ç—É—Å:</div>
                            <div class="info-value">
                                ${user.is_premium
                                    ? '<span class="badge premium">Premium ‚≠ê</span>'
                                    : '<span class="badge">–û–±—ã—á–Ω—ã–π</span>'
                                }
                            </div>
                        </div>

                        <div class="info-row">
                            <div class="info-label">–ë–æ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω:</div>
                            <div class="info-value">
                                ${user.allows_write_to_pm
                                    ? '<span class="badge">–î–∞ ‚úì</span>'
                                    : '<span class="badge" style="background-color: #ff3b30;">–ù–µ—Ç</span>'
                                }
                            </div>
                        </div>

                        <div class="info-row">
                            <div class="info-label">–¢–∏–ø —á–∞—Ç–∞:</div>
                            <div class="info-value ${!initData.chat_type ? 'empty' : ''}">${initData.chat_type || '–ù–µ —É–∫–∞–∑–∞–Ω'}</div>
                        </div>

                        <div class="info-row">
                            <div class="info-label">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:</div>
                            <div class="info-value">${tg.platform || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
                        </div>

                        <div class="info-row">
                            <div class="info-label">–í–µ—Ä—Å–∏—è Web App:</div>
                            <div class="info-value">${tg.version || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
                        </div>

                        <div class="info-row">
                            <div class="info-label">–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:</div>
                            <div class="info-value">${tg.colorScheme === 'dark' ? 'üåô –¢–µ–º–Ω–∞—è' : '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è'}</div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('profileContent').innerHTML = profileHTML;

            console.log('‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            console.log('‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è...');

            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å
            displayProfile();

            // –°–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º Telegram, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ
            tg.ready();
            console.log('‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ');
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        init();
    </script>
</body>
</html>
